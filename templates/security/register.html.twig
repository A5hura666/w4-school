{% extends 'base.html.twig' %}

{% block title %}Page d'inscription{% endblock %}

{% block content %}
    <section class="h-full flex items-center justify-center py-6">
        <div class="w-full max-w-md bg-white rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700">
            <div class="p-6 space-y-6">
                <a href="{{ path('app_index') }}" class="flex items-center justify-center">
                    <img src="{{ asset('images/logo.svg') }}" alt="W4 Logo"
                         class="h-20 dark:hidden">
                    <img src="{{ asset('images/logo-white.svg') }}" alt="W4 Logo"
                         class="h-20 hidden dark:block">
                </a>

                <h1 class="text-xl font-bold text-center text-gray-900 dark:text-white">
                    Créer un compte
                </h1>

                <form method="post" class="space-y-4">
                    {% for type, messages in app.flashes %}
                        {% if type == 'error' %}
                            {% for message in messages %}
                                <div class="text-red-500 text-sm text-center">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}

                    <div>
                        <label for="first_name" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                            Prénom
                        </label>
                        <input type="text" name="registration_form[first_name]" id="first_name"
                               class="w-full px-4 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                  dark:text-white focus:ring-primary-500 focus:border-primary-500"
                               required autocomplete="given-name">
                    </div>

                    <div>
                        <label for="last_name" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                            Nom
                        </label>
                        <input type="text" name="registration_form[last_name]" id="last_name"
                               class="w-full px-4 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                  dark:text-white focus:ring-primary-500 focus:border-primary-500"
                               required autocomplete="family-name">
                    </div>

                    <div>
                        <label for="email" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                            Email
                        </label>
                        <input type="email" name="registration_form[email]" id="email"
                               class="w-full px-4 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                  dark:text-white focus:ring-primary-500 focus:border-primary-500"
                               required autocomplete="email" autofocus>
                    </div>

                    <div>
                        <label for="password" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                            Mot de passe
                        </label>
                        <input type="password" name="registration_form[password]" id="password"
                               class="w-full px-4 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                  dark:text-white focus:ring-primary-500 focus:border-primary-500"
                               required autocomplete="new-password">
                        <p class="mt-2 text-xs text-gray-600 dark:text-gray-400">
                            Le mot de passe doit contenir :
                        <ul class="list-disc list-inside text-xs">
                            <li>Au moins 8 caractères</li>
                            <li>Une lettre majuscule</li>
                            <li>Une lettre minuscule</li>
                            <li>Un chiffre</li>
                            <li>Un caractère spécial</li>
                        </ul>
                        </p>
                    </div>

                    <div>
                        <label for="roles" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                            Rôle
                        </label>
                        <select name="registration_form[roles]" id="roles"
                                class="w-full px-4 py-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600
                                       dark:text-white focus:ring-primary-500 focus:border-primary-500"
                                required>
                            <option value="ROLE_STUDENT" selected>Étudiant</option>
                            <option value="ROLE_TEACHER">Professeur</option>
                        </select>
                    </div>

                    <button type="submit" class="w-full text-white bg-primary hover:bg-primary-dark focus:ring-4 focus:outline-none focus:ring-primary-light font-medium rounded-lg text-sm px-5 py-2.5">
                        Créer un compte
                    </button>
                </form>

                <div class="text-sm text-center text-gray-700 dark:text-gray-300">
                    Vous avez déjà un compte ?
                    <a href="{{ path('app_login') }}" class="text-blue-500 hover:underline dark:text-primary-400">
                        Connectez-vous
                    </a>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
